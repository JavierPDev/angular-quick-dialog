!function(t){try{t=angular.module("angularQuickDialog.template")}catch(e){t=angular.module("angularQuickDialog.template",[])}t.run(["$templateCache",function(t){t.put("template/quick-dialog.html",'<div class="quick-dialog" ng-show="dialog.isVisible"><span class="quick-dialog__close" ng-click="dialog.close()">x</span><div class="quick-dialog__content" ng-transclude></div></div>')}])}(),!function(t,e){"use strict";e.module("angularQuickDialog",["angularQuickDialog.template"]).factory("$quickDialog",function(){function t(t){this.isVisible=!1,this.name=t}function e(t){c[t].open()}function n(t){t=t||a.getTop().name,c[t].close()}function i(e){return c[e]=new t(e),c[e]}function o(){c={},a.clear()}var c={},a={stack:[],top:0,push:function(t){this.stack[this.top++]=t},pop:function(){return this.stack[--this.top]},getTop:function(){return this.stack[this.top-1]},clear:function(){this.top=0}};return t.prototype.open=function(){this.isVisible=!0,a.push(this)},t.prototype.close=function(){this.isVisible&&a.pop(),this.isVisible=!1},{open:e,close:n,create:i,reset:o}}).directive("quickDialog",["$timeout","$quickDialog",function(n,i){return{restrict:"EA",templateUrl:"template/quick-dialog.html",scope:{},transclude:!0,link:function(o,c,a){function l(){k=k||document.activeElement,g.append(d),d.bind("click",r),m.bind("keydown",s),n(function(){f.focus()})}function u(){m.unbind("keydown",s),d.unbind("click",r),d.remove(),n(function(){o.dialog.close()}),null!==k&&(k.focus(),k=h)}function s(t){t.keyCode===p&&(t.preventDefault(),u())}function r(t){t.stopPropagation(),u()}var d=e.element(document.createElement("div")).addClass("quick-dialog__backdrop"),p=27,g=e.element(document.body),m=e.element(t),f=document.getElementById(a.openFocus)||c[0],k=document.getElementById(a.closeFocus),h=document.getElementById(a.closeFocus);try{o.dialog=i.create(a.dialogName)}catch(b){throw new Error("Dialog needs a name.")}var v=!0;o.$watch("dialog.isVisible",function(t){v||(t?l():u()),v=!1}),o.$on("$routeChangeStart",function(){i.reset()})}}}])}(window,window.angular);