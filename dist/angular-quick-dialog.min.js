!function(t,n){"use strict";n.module("angularQuickDialog",[]).factory("$quickDialog",function(){function t(t){this.isVisible=!1,this.name=t}function n(t){c[t].open()}function e(t){t=t||u.getTop().name,c[t].close()}function i(n){return c[n]=new t(n),c[n]}function o(){c={},u.clear()}var c={},u={stack:[],top:0,push:function(t){this.stack[this.top++]=t},pop:function(){return this.stack[--this.top]},getTop:function(){return this.stack[this.top-1]},clear:function(){this.top=0}};return t.prototype.open=function(){this.isVisible=!0,u.push(this)},t.prototype.close=function(){this.isVisible&&u.pop(),this.isVisible=!1},{open:n,close:e,create:i,reset:o}}).directive("quickDialog",["$timeout","$quickDialog",function(e,i){return{restrict:"EA",templateUrl:"template/quick-dialog.html",scope:{},transclude:!0,link:function(o,c,u){function a(){h=h||document.activeElement,p.append(d),d.bind("click",r),f.bind("keydown",s),e(function(){m.focus()})}function l(){f.unbind("keydown",s),d.unbind("click",r),d.remove(),e(function(){o.dialog.close()}),null!==h&&(h.focus(),h=k)}function s(t){t.keyCode===g&&(t.preventDefault(),l())}function r(t){t.stopPropagation(),l()}var d=n.element(document.createElement("div")).addClass("quick-dialog__backdrop"),g=27,p=n.element(document.body),f=n.element(t),m=document.getElementById(u.openFocus)||c[0],h=document.getElementById(u.closeFocus),k=document.getElementById(u.closeFocus);try{o.dialog=i.create(u.dialogName)}catch(b){throw new Error("Dialog needs a name.")}var v=!0;o.$watch("dialog.isVisible",function(t){v||(t?a():l()),v=!1}),o.$on("$routeChangeStart",function(){i.reset()})}}}])}(window,window.angular),function(t){try{t=angular.module("angularQuickDialog")}catch(n){t=angular.module("angularQuickDialog",[])}t.run(["$templateCache",function(t){t.put("template/quick-dialog.html",'<div class="quick-dialog" ng-show="dialog.isVisible"><span class="quick-dialog__close" ng-click="dialog.close()">x</span><div class="quick-dialog__content" ng-transclude></div></div>')}])}();
//# sourceMappingURL=angular-quick-dialog.min.js.map