!function(a,b){"use strict";b.module("angularQuickDialog",["angularQuickDialog.template"]).factory("$quickDialog",function(){function a(a){this.isVisible=!1,this.name=a}function b(a){f[a].open()}function c(a){a=a||g.getTop().name,f[a].close()}function d(b){return f[b]=new a(b),f[b]}function e(){f={},g.clear()}var f={},g={stack:[],top:0,push:function(a){this.stack[this.top++]=a},pop:function(){return this.stack[--this.top]},getTop:function(){return this.stack[this.top-1]},clear:function(){this.top=0}};return a.prototype.open=function(){this.isVisible=!0,g.push(this)},a.prototype.close=function(){this.isVisible&&g.pop(),this.isVisible=!1},{open:b,close:c,create:d,reset:e}}).directive("quickDialog",["$timeout","$quickDialog",function(c,d){return{restrict:"EA",templateUrl:"template/quick-dialog.html",scope:{},transclude:!0,link:function(e,f,g){function h(){q=q||document.activeElement,n.append(l),l.bind("click",k),o.bind("keydown",j),c(function(){p.focus()})}function i(){o.unbind("keydown",j),l.unbind("click",k),l.remove(),c(function(){e.dialog.close()}),null!==q&&(q.focus(),q=r)}function j(a){a.keyCode===m&&(a.preventDefault(),i())}function k(a){a.stopPropagation(),i()}var l=b.element(document.createElement("div")).addClass("quick-dialog__backdrop"),m=27,n=b.element(document.body),o=b.element(a),p=document.getElementById(g.openFocus)||f[0],q=document.getElementById(g.closeFocus),r=document.getElementById(g.closeFocus);try{e.dialog=d.create(g.dialogName)}catch(s){throw new Error("Dialog needs a name.")}var t=!0;e.$watch("dialog.isVisible",function(a){t||(a?h():i()),t=!1}),e.$on("$routeChangeStart",function(){d.reset()})}}}])}(window,window.angular),function(a){try{a=angular.module("angularQuickDialog.template")}catch(b){a=angular.module("angularQuickDialog.template",[])}a.run(["$templateCache",function(a){a.put("template/quick-dialog.html",'<div class="quick-dialog" ng-show="dialog.isVisible"><span class="quick-dialog__close" ng-click="dialog.close()">x</span><div class="quick-dialog__content" ng-transclude></div></div>')}])}();
//# sourceMappingURL=angular-quick-dialog.min.js.map